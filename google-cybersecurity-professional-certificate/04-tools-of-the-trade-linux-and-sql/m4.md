- [SQL filtering versus Linux filtering](#sql-filtering-versus-linux-filtering)
  - [Accessing SQL](#accessing-sql)
  - [Differences between Linux and SQL filtering](#differences-between-linux-and-sql-filtering)
    - [Purpose](#purpose)
    - [Syntax](#syntax)
    - [Structure](#structure)
    - [Joining tables](#joining-tables)
    - [Best uses](#best-uses)
- [Query a database](#query-a-database)
  - [Basic SQL query](#basic-sql-query)
    - [`SELECT`](#select)
    - [`FROM`](#from)
    - [`ORDER BY`](#order-by)
      - [Sorting in ascending order](#sorting-in-ascending-order)
      - [Sorting in descending order](#sorting-in-descending-order)
      - [Sorting based on multiple columns](#sorting-based-on-multiple-columns)
- [The `WHERE` clause and basic operators](#the-where-clause-and-basic-operators)
  - [How filtering helps](#how-filtering-helps)
  - [`WHERE`](#where)
  - [Filtering for patterns](#filtering-for-patterns)
  - [Wildcards](#wildcards)
  - [`LIKE`](#like)
- [Operators for filtering dates and numbers](#operators-for-filtering-dates-and-numbers)
  - [Numbers, dates, and times in cybersecurity](#numbers-dates-and-times-in-cybersecurity)
  - [Comparison operators](#comparison-operators)
  - [Incorporating operators into filters](#incorporating-operators-into-filters)
  - [`BETWEEN`](#between)
- [More on filters with `AND`, `OR`, and `NOT`](#more-on-filters-with-and-or-and-not)
  - [Logical operators](#logical-operators)
    - [`AND`](#and)
    - [`OR`](#or)
    - [`NOT`](#not)
    - [Combining logical operators](#combining-logical-operators)
- [Apply filters to SQL queries](#apply-filters-to-sql-queries)
  - [Scenario](#scenario)
  - [Step-By-Step Instructions](#step-by-step-instructions)
    - [Step 1: Access the template](#step-1-access-the-template)
    - [Step 2: Access supporting materials](#step-2-access-supporting-materials)
    - [Step 3: Retrieve after hours failed login attempts](#step-3-retrieve-after-hours-failed-login-attempts)
    - [Step 4: Retrieve login attempts on specific dates](#step-4-retrieve-login-attempts-on-specific-dates)
    - [Step 5: Retrieve login attempts outside of Mexico](#step-5-retrieve-login-attempts-outside-of-mexico)
    - [Step 6: Retrieve employees in Marketing](#step-6-retrieve-employees-in-marketing)
    - [Step 7: Retrieve employees in Finance or Sales](#step-7-retrieve-employees-in-finance-or-sales)
    - [Step 8: Retrieve all employees in IT](#step-8-retrieve-all-employees-in-it)
    - [Step 9: Finalize your document](#step-9-finalize-your-document)
      - [What to Include in Your Response](#what-to-include-in-your-response)
    - [Step 10: Assess your activity](#step-10-assess-your-activity)
  - [Activity Exemplar](#activity-exemplar)
- [Compare types of joins](#compare-types-of-joins)
  - [Inner joins](#inner-joins)
    - [The syntax of an inner join](#the-syntax-of-an-inner-join)
  - [Outer joins](#outer-joins)
    - [Left joins](#left-joins)
    - [Right joins](#right-joins)
    - [Full outer joins](#full-outer-joins)
- [Continuous learning in SQL](#continuous-learning-in-sql)
  - [Aggregate functions](#aggregate-functions)
  - [Aggregate function syntax](#aggregate-function-syntax)
  - [Continuing to learn SQL](#continuing-to-learn-sql)
- [Quiz: Module 4 Challenge](#quiz-module-4-challenge)
  - [Questions Set 1](#questions-set-1)
  - [Answers Set 1](#answers-set-1)
  - [Questions Set 2](#questions-set-2)
  - [Answers Set 2](#answers-set-2)
  - [Questions Set 3](#questions-set-3)
  - [Answers Set 3](#answers-set-3)

# SQL filtering versus Linux filtering

- [Reference guide: SQL](https://docs.google.com/document/d/1QVfrtp4QywbvQ5ALupN7-gKNrXI9yrYDv6PyCwWVAYg/template/preview)

## Accessing SQL

There are many interfaces for accessing SQL and many different versions of SQL. One way to access SQL is through the Linux command line.

To access SQL from Linux, you need to type in a command for the version of SQL that you want to use. For example, if you want to access SQLite, you can enter the command sqlite3 in the command line.

After this, any commands typed in the command line will be directed to SQL instead of Linux commands.

## Differences between Linux and SQL filtering

Although both Linux and SQL allow you to filter through data, there are some differences that affect which one you should choose.

### Purpose

Linux filters data in the context of files and directories on a computer system. It’s used for tasks like searching for specific files, manipulating file permissions, or managing processes.

SQL is used to filter data within a database management system. It’s used for querying and manipulating data stored in tables and retrieving specific information based on defined criteria.

### Syntax

Linux uses various commands and command-line options specific to each filtering tool. Syntax varies depending on the tool and purpose. Some examples of Linux commands are find, sed, cut, e grep

SQL uses the Structured Query Language (SQL), a standardized language with specific keywords and clauses for filtering data across different SQL databases. Some examples of SQL keywords and clauses are WHERE, SELECT, JOIN

### Structure

SQL offers a lot more structure than Linux, which is more free-form and not as tidy.

For example, if you wanted to access a log of employee log-in attempts, SQL would have each record separated into columns. Linux would print the data as a line of text without this organization. As a result, selecting a specific column to analyze would be easier and more efficient in SQL.

In terms of structure, SQL provides results that are more easily readable and that can be adjusted more quickly than when using Linux.

### Joining tables

Some security-related decisions require information from different tables. SQL allows the analyst to join multiple tables together when returning data. Linux doesn’t have that same functionality; it doesn’t allow data to be connected to other information on your computer. This is more restrictive for an analyst going through security logs.

### Best uses

As a security analyst, it’s important to understand when you can use which tool. Although SQL has a more organized structure and allows you to join tables, this doesn’t mean that there aren’t situations that would require you to filter data in Linux.

A lot of data used in cybersecurity will be stored in a database format that works with SQL. However, other logs might be in a format that is not compatible with SQL. For instance, if the data is stored in a text file, you cannot search through it with SQL. In those cases, it is useful to know how to filter in Linux.

# Query a database

## Basic SQL query

There are two essential keywords in any SQL query: `SELECT` and `FROM`. You will use these keywords every time you want to query a SQL database. Using them together helps SQL identify what data you need from a database and the table you are returning it from.

The video demonstrated this SQL query:

```sql
SELECT employee_id, device_id
FROM employees;
```

In readings and quizzes, this course uses a sample database called the `Chinook` database to run queries. The `Chinook` database includes data that might be created at a digital media company. A security analyst employed by this company might need to query this data. For example, the database contains eleven tables, including an `employees` table, a `customers` table, and an `invoices` table. These tables include data such as names and addresses.

### `SELECT`

The `SELECT` keyword indicates which columns to return. For example, you can return the `customerid` column from the Chinook database with

`SELECT customerid`

You can also select multiple columns by separating them with a comma. For example, if you want to return both the `customerid` and `city` columns, you should write `SELECT customerid, city`.

If you want to return all columns in a table, you can follow the `SELECT` keyword with an asterisk (`*`). The first line in the query will be `SELECT *`.

**Note**: Although the tables you're querying in this course are relatively small, using `SELECT *` may not be advisable when working with large databases and tables; in those cases, the final output may be difficult to understand and might be slow to run.

### `FROM`

The `SELECT` keyword always comes with the `FROM` keyword. `FROM` indicates which table to query. To use the `FROM` keyword, you should write it after the `SELECT` keyword, often on a new line, and follow it with the name of the table you’re querying. If you want to return all columns from the `customers` table, you can write:

```sql
SELECT *
FROM customers;
```

### `ORDER BY`

Database tables are often very complicated, and this is where other SQL keywords come in handy. `ORDER BY` is an important keyword for organizing the data you extract from a table.

`ORDER BY` sequences the records returned by a query based on a specified column or columns. This can be in either ascending or descending order.

#### Sorting in ascending order

To use the `ORDER BY` keyword, write it at the end of the query and specify a column to base the sort on. In this example, SQL will return the `customerid`, `city`, and `country` columns from the `customers` table, and the records will be sequenced by the `city` column:

```sql
SELECT customerid, city, country
FROM customers
ORDER BY city;
```

The `ORDER BY` keyword sorts the records based on the column specified after this keyword. By default, as shown in this example, the sequence will be in ascending order. This means

- if you choose a column containing numeric data, it sorts the output from the smallest to largest. For example, if sorting on `customerid`, the ID numbers are sorted from smallest to largest.
- if the column contains alphabetic characters, such as in the example with the city column, it orders the records from the beginning of the alphabet to the end.

#### Sorting in descending order

You can also use the `ORDER BY` with the `DESC` keyword to sort in descending order. The `DESC` keyword is short for "descending" and tells SQL to sort numbers from largest to smallest, or alphabetically from Z to A. This can be done by following `ORDER BY` with the `DESC` keyword. For example, you can run this query to examine how the results differ when `DESC` is applied:

```sql
SELECT customerid, city, country
FROM customers
ORDER BY city DESC;
```

Now, cities at the end of the alphabet are listed first.

#### Sorting based on multiple columns

You can also choose multiple columns to order by. For example, you might first choose the `country` and then the `city` column. SQL then sorts the output by `country`, and for rows with the same `country`, it sorts them based on `city`. You can run this to explore how SQL displays this:

```sql
SELECT customerid, city, country
FROM customers
ORDER BY country, city;
```

# The `WHERE` clause and basic operators

## How filtering helps

As a security analyst, you'll often be responsible for working with very large and complicated security logs. To find the information you need, you'll often need to use SQL to filter the logs.

In a cybersecurity context, you might use filters to find the login attempts of a specific user or all login attempts made at the time of a security issue. As another example, you might filter to find the devices that are running a specific version of an application.

## `WHERE`

To create a filter in SQL, you need to use the keyword `WHERE`. `WHERE` indicates the condition for a filter.

If you needed to email employees with a title of IT Staff, you might use a query like the one in the following example. You can run this example to examine what it returns:

```sql
SELECT firstname, lastname, title, email
FROM employees
WHERE title = 'IT Staff';
```

Rather than returning all records in the `employees` table, this `WHERE` clause instructs SQL to return only those that contain `'IT Staff'` in the title column. It uses the equals sign (`=`) operator to set this condition.

**Note**: You should place the semicolon (`;`) where the query ends. When you add a filter to a basic query, the semicolon is after the filter.

## Filtering for patterns

You can also filter based on a pattern. For example, you can identify entries that start or end with a certain character or characters. Filtering for a pattern requires incorporating two more elements into your `WHERE` clause:

- a wildcard
- the `LIKE` operator

## Wildcards

A **wildcard** is a special character that can be substituted with any other character. Two of the most useful wildcards are the percentage sign (`%`) and the underscore (`_`):

- The percentage sign substitutes for any number of other characters.
- The underscore symbol only substitutes for one other character.

These wildcards can be placed after a string, before a string, or in both locations depending on the pattern you’re filtering for.

The following table includes these wildcards applied to the string `'a'` and examples of what each pattern would return.

| Pattern  | Results that could be returned |
| :------: | :----------------------------: |
|  `'a%'`  |       `apple123, art, a`       |
|  `'a_'`  |          `as, an, a7`          |
| `'a__' ` |        `ant, add, a1c`         |
|  `'%a'`  |        `pizza, Z6ra, a`        |
|  `'_a'`  |          `ma, 1a, Ha`          |
| `'%a%'`  |        `Again, back, a`        |
| `'_a_'`  |        `Car, ban, ea7`         |

## `LIKE`

To apply wildcards to the filter, you need to use the `LIKE` operator instead of an equals sign (`=`). `LIKE` is used with `WHERE` to search for a pattern in a column.

For instance, if you want to email employees with a title of either `'IT Staff'` or `'IT Manager'`, you can use `LIKE` operator combined with the `%` wildcard:

```sql
SELECT lastname, firstname, title, email
FROM employees
WHERE title LIKE 'IT%';
```

As another example, if you want to search through the invoices table to find all customers located in states with an abbreviation of `'NY'`, `'NV'`, `'NS'` or `'NT'`, you can use the `'N_'` pattern on the `state` column:

```sql
SELECT firstname,lastname, state, country
FROM customers
WHERE state LIKE 'N_';
```

This returns all the records with state abbreviations that follow this pattern.

# Operators for filtering dates and numbers

## Numbers, dates, and times in cybersecurity

Security analysts work with more than just **string data**, or data consisting of an ordered sequence of characters.

They also frequently work with **numeric data**, or data consisting of numbers. A few examples of numeric data that you might encounter in your work as a security analyst include:

- the number of login attempts
- the count of a specific type of log entry
- the volume of data being sent from a source
- the volume of data being sent to a destination

You'll also encounter **date and time data**, or data representing a date and/or time. As a first example, logs will generally timestamp every record. Other time and date data might include:

- login dates
- login times
- dates for patches
- the duration of a connection

## Comparison operators

In SQL, filtering numeric and date and time data often involves operators. You can use the following operators in your filters to make sure you return only the rows you need:

| operator |           use            |
| :------: | :----------------------: |
|   `<`    |        less than         |
|   `>`    |       greater than       |
|   `=`    |         equal to         |
|   `<=`   |  less than or equal to   |
|   `>=`   | greater than or equal to |
|   `<>`   |       not equal to       |

**Note**: You can also use `!=` as an alternative operator for not equal to.

## Incorporating operators into filters

These comparison operators are used in the `WHERE` clause at the end of a query. The following query uses the `>` operator to filter the `birthdate` column. You can run this query to explore its output:

```sql
SELECT firstname, lastname, birthdate
FROM employees
WHERE birthdate > '1970-01-01';
```

This query returns the first and last names of employees born after, but not on, `'1970-01-01'` (or January 1, 1970). If you were to use the `>=` operator instead, the results would also include results on exactly `'1970-01-01'`.

In other words, the `>` operator is exclusive and the `>=` operator is inclusive. An `exclusive operator` is an operator that does not include the value of comparison. An `inclusive operator` is an operator that includes the value of comparison.

## `BETWEEN`

Another operator used for numeric data as well as date and time data is the `BETWEEN` operator. `BETWEEN` filters for numbers or dates within a range. For example, if you want to find the first and last names of all employees hired between January 1, 2002 and January 1, 2003, you can use the `BETWEEN` operator as follows:

```sql
SELECT firstname, lastname, hiredate
FROM employees
WHERE hiredate BETWEEN '2002-01-01' AND '2003-01-01';
```

**Note**: The `BETWEEN` operator is inclusive. This means records with a `hiredate` of January 1, 2002 or January 1, 2003 are included in the results of the previous query.

# More on filters with `AND`, `OR`, and `NOT`

## Logical operators

`AND`, `OR`, and `NOT` allow you to filter your queries to return the specific information that will help you in your work as a security analyst. They are all considered logical operators.

### `AND`

First, `AND` is used to filter on two conditions. `AND` specifies that both conditions must be met simultaneously.

As an example, a cybersecurity concern might affect only those customer accounts that meet both the condition of being handled by a support representative with an ID of 5 and the condition of being located in the USA. To find the names and emails of those specific customers, you should place the two conditions on either side of the `AND` operator in the `WHERE` clause:

```sql
SELECT firstname, lastname, email, country, supportrepid
FROM customers
WHERE supportrepid = 5 AND country = 'USA';
```

Running this query returns four rows of information about the customers. You can use this information to contact them about the security concern.

### `OR`

The `OR` operator also connects two conditions, but `OR` specifies that either condition can be met. It returns results where the first condition, the second condition, or both are met.

For example, if you are responsible for finding all customers who are either in the USA or Canada so that you can communicate information about a security update, you can use an `OR` operator to find all the needed records. As the following query demonstrates, you should place the two conditions on either side of the `OR` operator in the `WHERE` clause:

```sql
SELECT firstname, lastname, email, country
FROM customers
WHERE country = 'Canada' OR country = 'USA';
```

The query returns all customers in either the US or Canada.

**Note**: Even if both conditions are based on the same column, you need to write out both full conditions. For instance, the query in the previous example contains the filter `WHERE country = 'Canada' OR country = 'USA'`.

### `NOT`

Unlike the previous two operators, the `NOT` operator only works on a single condition, and not on multiple ones. The `NOT` operator negates a condition. This means that SQL returns all records that don’t match the condition specified in the query.

For example, if a cybersecurity issue doesn't affect customers in the USA but might affect those in other countries, you can return all customers who are not in the USA. This would be more efficient than creating individual conditions for all of the other countries. To use the `NOT` operator for this task, write the following query and place `NOT` directly after `WHERE`:

```sql
SELECT firstname, lastname, email, country
FROM customers
WHERE NOT country = 'USA';
```

SQL returns every entry where the customers are not from the USA.

**Pro tip**: Another way of finding values that are not equal to a certain value is by using the `<>` operator or the `!=` operator. For example, `WHERE country <> 'USA' and WHERE country != 'USA'` are the same filters as `WHERE NOT country = 'USA'`.

### Combining logical operators

Logical operators can be combined in filters. For example, if you know that both the USA and Canada are not affected by a cybersecurity issue, you can combine operators to return customers in all countries besides these two. In the following query, `NOT` is placed before the first condition, it's joined to a second condition with `AND`, and then `NOT` is also placed before that second condition. You can run it to explore what it returns:

```sql
SELECT firstname, lastname, email, country
FROM customers
WHERE NOT country = 'Canada' AND NOT country = 'USA';
```

# Apply filters to SQL queries

Activity Overview

In this activity, you will create a new portfolio document to demonstrate your experience using SQL. You can add this document to your cybersecurity portfolio, which you can share with prospective employers or recruiters. To review the importance of building a professional portfolio and options for creating your portfolio, read [Create a cybersecurity portfolio](https://storage.googleapis.com/gwg-content/cybercert/course4/Create%20a%20cybersecurity%20portfolio.pdf).

To create your portfolio document, you will review a scenario and follow a series of steps. This scenario is connected to the lab you have just completed about using the AND, OR, and NOT operators in SQL to filter for information. You will explain the queries you performed in that lab, and this will help you prepare for future job interviews and other steps in the hiring process.

Be sure to complete this activity and answer the questions that follow before moving on. The next course item will provide you with a completed exemplar to compare to your own work.

## Scenario

Review the scenario below. Then complete the step-by-step instructions.

You are a security professional at a large organization. Part of your job is to investigate security issues to help keep the system secure. You recently discovered some potential security issues that involve login attempts and employee machines.

Your task is to examine the organization’s data in their `employees` and `log_in_attempts` tables. You’ll need to use SQL filters to retrieve records from different datasets and investigate the potential security issues.

**Note**: This scenario involves the same queries as the ones the **Filter with `AND`, `OR`, and `NOT`** lab. You can revisit the lab to get screenshots to include in your portfolio document. If you choose, it's also possible to complete this activity without revisiting the lab by typing your queries in the template

## Step-By-Step Instructions

Follow the instructions to complete each step of the activity. Then, answer the 8 questions in the next course item before comparing your work to a completed exemplar.

### Step 1: Access the template

To use the template for this course item:

- Click the following link and select Use Template: [Apply filters to SQL queries](https://docs.google.com/document/d/1QLYj8sdBCYtcZv3ZF1RlcPft8Uh-fscWSZsiT_6QVy0/template/preview)

(In this step, you will just open the template. More instructions for how to use the template will be included in later steps.)

### Step 2: Access supporting materials

The following supporting materials will help you complete this activity. Keep them open as you proceed to the next steps.

**Note**: It is recommended that you use the **Filter with `AND`, `OR`, and `NOT`** lab to complete this portfolio activity.

To use the supporting materials for this course item, click the following links:

- The Instructions for including SQL queries document provides instructions and best practices for including samples of SQL queries in your portfolio activity: [Instructions for including SQL queries](https://docs.google.com/document/d/1b06OpDP1RH8iE8phf0h5GRsMPPxoLZ92z86_OtESJp8/template/preview?resourcekey=0-V4KE_W_sE-p9i3H7dpUppQ)
- The Table formats document describes how the tables used for this portfolio activity are organized: [Table formats](https://docs.google.com/document/d/10uIJTRVJEL9nM_cXgMTFZNNmxRKAYzjbwMFdjYgO2wQ/template/preview?resourcekey=0-zYsLZ5L4jmKShdfZ8fccQg)

### Step 3: Retrieve after hours failed login attempts

You recently discovered a potential security incident that occurred after business hours. To investigate this, you need to query the `log_in_attempts` table and review after hours login activity. Use filters in SQL to create a query that identifies all failed login attempts that occurred after 18:00. (The time of the login attempt is found in the `login_time` column. The `success` column contains a value of `0` when a login attempt failed; you can use either a value of `0` or `FALSE` in your query to identify failed login attempts.)

Describe your query and how it works in the Retrieve after hours failed login attempts section of the Apply filters to SQL queries template.

In the **Filter with `AND`, `OR`, and `NOT`** lab, take a screenshot of the SQL query you used and copy it into the template. Or, type this query directly into the template.

### Step 4: Retrieve login attempts on specific dates

A suspicious event occurred on 2022-05-09. To investigate this event, you want to review all login attempts which occurred on this day and the day before. Use filters in SQL to create a query that identifies all login attempts that occurred on 2022-05-09 or 2022-05-08. (The date of the login attempt is found in the `login_date` column.)

Describe your query and how it works in the Retrieve login attempts on specific dates section of the Apply filters to SQL queries template.

In the **Filter with `AND`, `OR`, and `NOT`** lab, take a screenshot of the SQL query you used and copy it into the template. Or, type this query directly into the template.

### Step 5: Retrieve login attempts outside of Mexico

There’s been suspicious activity with login attempts, but the team has determined that this activity didn't originate in Mexico. Now, you need to investigate login attempts that occurred outside of Mexico. Use filters in SQL to create a query that identifies all login attempts that occurred outside of Mexico. (When referring to Mexico, the `country` column contains values of both `MEX` and `MEXICO`, and you need to use the `LIKE` keyword with `%` to make sure your query reflects this.)

Describe your query and how it works in the Retrieve login attempts on specific dates section of the Apply filters to SQL queries template.

In the **Filter with `AND`, `OR`, and `NOT`** lab, take a screenshot of the SQL query you used and copy it into the template. Or, type this query directly into the template.

### Step 6: Retrieve employees in Marketing

Your team wants to perform security updates on specific employee machines in the Marketing department. You’re responsible for getting information on these employee machines and will need to query the `employees` table. Use filters in SQL to create a query that identifies all employees in the Marketing department for all offices in the East building.

(The department of the employee is found in the `department` column, which contains values that include `Marketing`. The office is found in the office column. Some examples of values in this column are `East-170`, `East-320`, and `North-434`. You’ll need to use the `LIKE` keyword with `%` to filter for the East building.)

Describe your query and how it works in the Retrieve employees in Marketing section of the Apply filters to SQL queries template.

In the **Filter with `AND`, `OR`, and `NOT`** lab, take a screenshot of the SQL query you used and copy it into the template. Or, type this query directly into the template.

### Step 7: Retrieve employees in Finance or Sales

Your team now needs to perform a different security update on machines for employees in the Sales and Finance departments. Use filters in SQL to create a query that identifies all employees in the Sales or Finance departments. (The department of the employee is found in the department column, which contains values that include Sales and Finance.)

Describe your query and how it works in the Retrieve employees in Finance or Sales section of the Apply filters to SQL queries template.

In the **Filter with `AND`, `OR`, and `NOT`** lab, take a screenshot of the SQL query you used and copy it into the template. Or, type this query directly into the template.

### Step 8: Retrieve all employees in IT

Your team needs to make one more update to employee machines. The employees who are in the Information Technology department already had this update, but employees in all other departments need it. Use filters in SQL to create a query which identifies all employees not in the IT department. (The department of the employee is found in the `department` column, which contains values that include `Information Technology`.)

Describe your query and how it works in the Retrieve all employees not in IT section of the Apply filters to SQL queries template.

In the **Filter with `AND`, `OR`, and `NOT`** lab, take a screenshot of the SQL query you used and copy it into the template. Or, type this query directly into the template.

### Step 9: Finalize your document

To finalize the document and make its purpose clear to potential employers, be sure to complete the Project description and Summary sections of the Apply filters to SQL queries template.

In the Project description section, give a general overview of the scenario and what you accomplish through SQL. Write two to four sentences.

In the Summary section, provide a short summary of the previous tasks and connect them to the scenario. Write approximately two to four sentences.

#### What to Include in Your Response

Be sure to include the following in your completed activity:

- Screenshots of your queries or typed versions of the queries
- Explanations of your queries
- A project description at the beginning
- A summary at the end
- Details on using `LIKE` to search for a pattern
- Details on filtering for dates and times
- Details on using `AND` and `OR` to filter on multiple conditions

Details on using `NOT` in filters

### Step 10: Assess your activity

The next course item is a self-assessment for your Apply filters to SQL queries portfolio activity. You will use these statements to review your own work. The self-assessment process is an important part of the learning experience because it allows you to objectively assess your Apply filters to SQL queries portfolio activity.

There are a total of 8 points possible for this activity and each statement is worth 1 point.

To complete the self-assessment, first open your Apply filters to SQL queries portfolio activity. Then respond yes or no to each statement.

When you complete and submit your responses, you will receive a percentage score. This score will help you confirm whether you completed the required steps of the activity. The recommended passing grade for this project is at least 80% (or 7/8 points). If you want to increase your score, you can revise your project and then resubmit your responses to reflect any changes you made. Try to achieve at least 7 points before continuing on to the exemplar.

## Activity Exemplar

Link to exemplar: [Apply filters to SQL queries](https://docs.google.com/document/d/1R-wz2DrsddIlst5iWVKa8-_j8sROgKAWvtITmy-o2dk/template/preview?resourcekey=0-VW7ZQ-CAPGe9JIbBSjZJjg)

# Compare types of joins

## Inner joins

The first type of join that you might perform is an inner join. `INNER JOIN` returns rows matching on a specified column that exists in more than one table.

![venn-diagram-inner-join](/google-cybersecurity-professional-certificate/04-tools-of-the-trade-linux-and-sql/assets/venn-diagram-inner-join.png)

It only returns the rows where there is a match, but like other types of joins, it returns all specified columns from all joined tables. For example, if the query joins two tables with `SELECT *`, all columns in both of the tables are returned.

**Note**: If a column exists in both of the tables, it is returned twice when `SELECT *` is used.

### The syntax of an inner join

To write a query using `INNER JOIN`, you can use the following syntax:

```sql
SELECT *
FROM employees
INNER JOIN machines ON employees.device_id = machines.device_id;
```

You must specify the two tables to join by including the first or left table after `FROM` and the second or right table after `INNER JOIN`.

After the name of the right table, use the `ON` keyword and the `=` operator to indicate the column you are joining the tables on. It's important that you specify both the table and column names in this portion of the join by placing a period (`.`) between the table and the column.

In addition to selecting all columns, you can select only certain columns. For example, if you only want the join to return the `username`, `operating_system` and `device_id` columns, you can write this query:

```sql
SELECT username, operating_system, employees.device_id
FROM  employees
INNER JOIN machines ON employees.device_id = machines.device_id;
```

**Note**: In the example query, `username` and `operating_system` only appear in one of the two tables, so they are written with just the column name. On the other hand, because `device_id` appears in both tables, it's necessary to indicate which one to return by specifying both the table and column name (`employees.device_id`).

## Outer joins

Outer joins expand what is returned from a join. Each type of outer join returns all rows from either one table or both tables.

### Left joins

When joining two tables, `LEFT JOIN` returns all the records of the first table, but only returns rows of the second table that match on a specified column.

![venn-diagram-left-join](/google-cybersecurity-professional-certificate/04-tools-of-the-trade-linux-and-sql/assets/venn-diagram-left-join.png)

The syntax for using `LEFT JOIN` is demonstrated in the following query:

```sql
SELECT *
FROM employees
LEFT JOIN machines ON employees.device_id = machines.device_id;
```

As with all joins, you should specify the first or left table as the table that comes after `FROM` and the second or right table as the table that comes after `LEFT JOIN`. In the example query, because `employees` is the left table, all of its records are returned. Only records that match on the `device_id` column are returned from the right table, `machines`.

### Right joins

When joining two tables, **RIGHT JOIN** returns all of the records of the second table, but only returns rows from the first table that match on a specified column.

The following query demonstrates the syntax for `RIGHT JOIN`:

![venn-diagram-right-join](/google-cybersecurity-professional-certificate/04-tools-of-the-trade-linux-and-sql/assets/venn-diagram-right-join.png)

```sql
SELECT *
FROM employees
RIGHT JOIN machines ON employees.device_id = machines.device_id;
```

`RIGHT JOIN` has the same syntax as `LEFT JOIN`, with the only difference being the keyword `RIGHT JOIN` instructs SQL to produce different output. The query returns all records from machines, which is the second or right table. Only matching records are returned from employees, which is the first or left table.

Note: You can use `LEFT JOIN` and `RIGHT JOIN` and return the exact same results if you use the tables in reverse order. The following `RIGHT JOIN` query returns the exact same result as the `LEFT JOIN` query demonstrated in the previous section:

```sql
SELECT *
FROM machines
RIGHT JOIN employees ON employees.device_id = machines.device_id;
```

All that you have to do is switch the order of the tables that appear before and after the keyword used for the join, and you will have swapped the left and right tables.

### Full outer joins

`FULL OUTER JOIN` returns all records from both tables. You can think of it as a way of completely merging two tables.

![venn-diagram-full-outer-join](/google-cybersecurity-professional-certificate/04-tools-of-the-trade-linux-and-sql/assets/venn-diagram-full-outer-join.png)

You can review the syntax for using `FULL OUTER JOIN` in the following query:

```sql
SELECT *
FROM employees
FULL OUTER JOIN machines ON employees.device_id = machines.device_id;
```

The results of a `FULL OUTER JOIN` query include all records from both tables. Similar to `INNER JOIN`, the order of tables does not change the results of the query.

# Continuous learning in SQL

## Aggregate functions

In SQL, **aggregate functions** are functions that perform a calculation over multiple data points and return the result of the calculation. The actual data is not returned.

There are various aggregate functions that perform different calculations:

- `COUNT` returns a single number that represents the number of rows returned from your query.
- `AVG` returns a single number that represents the average of the numerical data in a column.
- `SUM` returns a single number that represents the sum of the numerical data in a column.

## Aggregate function syntax

To use an aggregate function, place the keyword for it after the `SELECT` keyword, and then in parentheses, indicate the column you want to perform the calculation on.

For example, when working with the `customers` table, you can use aggregate functions to summarize important information about the table. If you want to find out how many customers there are in total, you can use the `COUNT` function on any column, and SQL will return the total number of records, excluding `NULL` values. You can run this query and explore its output:

```sql
SELECT COUNT(firstname)
FROM customers;
```

The result is a table with one column titled `COUNT(firstname)` and one row that indicates the count.

If you want to find the number of customers from a specific country, you can add a filter to your query:

```sql
SELECT COUNT(firstname)
FROM customers
WHERE country = 'USA';
```

With this filter, the count is lower because it only includes the records where the `country` column contains a value of `'USA'`.

There are a lot of other aggregate functions in SQL. The syntax of placing them after `SELECT` is exactly the same as the `COUNT` function.

## Continuing to learn SQL

SQL is a widely used querying language, with many more keywords and applications. You can continue to learn more about aggregate functions and other aspects of using SQL on your own.

Most importantly, approach new tasks with curiosity and a willingness to find new ways to apply SQL to your work as a security analyst. Identify the data results that you need and try to use SQL to obtain these results.

Fortunately, SQL is one of the most important tools for working with databases and analyzing data, so you'll find a lot of support in trying to learn SQL online. First, try searching for the concepts you've already learned and practiced to find resources that have accurate easy-to-follow explanations. When you identify these resources, you can use them to extend your knowledge.

Continuing your practical experience with SQL is also important. You can also search for new databases that allow you to perform SQL queries using what you've learned.

# Quiz: Module 4 Challenge

## Questions Set 1

1. Why might a security analyst use SQL?
   1. To assign new passwords to users
   2. To efficiently find needed data in security logs
   3. To store data in a spreadsheet
   4. To create new files on their computer
2. What is true about the values in the primary key column? Select all that apply.
   1. They cannot be null (or empty).
   2. They should never contain numeric data.
   3. Each row must have a unique value.
   4. They do not need to be unique.
3. Which of these SQL statements queries the employees table? Select all that apply.
   1. `SELECT employees FROM employee_id;`
   2. `SELECT employee_id, device_id FROM employees WHERE employee_id > 1100;`
   3. `SELECT * FROM employees;`
   4. `SELECT employees FROM *;`
4. What does INNER JOIN do?
   1. Compare tables and return only the rows that have a matching value in a specified column
   2. Combine tables and save them as a new table
   3. Return every row in joined tables
   4. Filter databases to return only columns that exist in every table
5. Which SQL keyword indicates the condition for a filter?
   1. `FROM`
   2. `WHERE`
   3. `INNER JOIN`
   4. `SELECT`
6. You work with a table that has one column for name. Some of these names have prefixes. You want to identify all of the doctors. Which query will return every name that starts with the prefix 'Dr.'?
   1. `WHERE name = ‘Dr.%’;`
   2. `WHERE name LIKE ‘Dr._’;`
   3. `WHERE name LIKE ‘Dr.%’;`
   4. `WHERE name = ‘Dr._’;`
7. You need to perform a SQL join. You want to return all the columns with records matching on the device_id column between the employees and machines tables. You also want to return all records from the employees table. Which of the following queries would you use?
   1. `SELECT * FROM employees INNER JOIN machines ON employees.device_id = machines.device_id;`
   2. `SELECT * FROM employees LEFT JOIN machines ON employees.device_id = machines.device_id;`
   3. `SELECT * FROM employees FULL OUTER JOIN machines ON employees.device_id = machines.device_id`
   4. `SELECT * FROM employees RIGHT JOIN machines ON employees.device_id = machines.device_id;`
8. You are working with the `Chinook` database. You want to return the `employeeid` and `email` columns from the `employees` table. Replace `--???` with the missing information to complete the query. (If you want to undo your changes to the query, you can click the Reset button.) `--??? FROM employees;`
   1. 4
   2. 8
   3. 6
   4. 2
9. You are working with the `Chinook` database and want to filter on the `hiredate` column to find all employees hired on or after `'2003-10-17'` (October 17, 2003). Replace `--???` with the missing information to complete the query. (If you want to undo your changes to the query, you can click the Reset button.) `SELECT firstname,lastname,hiredate FROM employees --???`
   1. 3
   2. 1
   3. 4
   4. 2
10. You are working with the Chinook database and are responsible for filtering for the customers that live in the city of 'Mountain View' and work for the company of 'Google Inc.' Replace --??? with the missing information to complete the query. (If you want to undo your changes to the query, you can click the Reset button.) `SELECT firstname, lastname, city, company FROM customers --???`
    1. 3
    2. 1
    3. 2
    4. 4

## Answers Set 1

1. 2
2. 1 & 3
3. 2 & 3
4. 1
5. 2
6. 3
7. 2
8. `SELECT employeeid, email FROM employees;` 2
9. `SELECT firstname,lastname,hiredate FROM employees WHERE hiredate >= '2003-10-17';` 3
10. `SELECT firstname, lastname, city, company FROM customers WHERE city = 'Mountain View' AND company = 'Google Inc.'` 2

## Questions Set 2

1. A security analyst queries a database related to security patches. How can SQL help this analyst with their work?
   1. SQL will automatically produce a report when the patches have been installed.
   2. The analyst can efficiently find the data they need.
   3. SQL will send out a spreadsheet about the patches.
   4. The analyst can directly install patches from SQL.
2. Fill in the blank: A column in which every row has a unique entry and which is used to identify a table is called a **\_**.
   1. foreign key
   2. relational key
   3. database key
   4. primary key
3. Which of these SQL statements queries the employees table? Select all that apply.
   1. `SELECT employee_id, device_id FROM employees WHERE employee_id > 1100;`
   2. `SELECT * FROM employees;`
   3. `SELECT employees FROM employee_id;`
   4. `SELECT employees FROM *;`
4. What does INNER JOIN do?
   1. Combine tables and save them as a new table
   2. Filter databases to return only columns that exist in every table
   3. Compare tables and return only the rows that have a matching value in a specified column
   4. Return every row in joined tables
5. What does WHERE department = 'Sales' indicate in the following SQL query? `SELECT * FROM employees WHERE department = 'Sales';`
   1. To only return rows that match the filter
   2. To change all the values in the department column to 'Sales'
   3. To only return the department column
   4. To highlight the department column in the results
6. Which query returns all records that contain the character 'z' from the name column in the employees table?
   1. `SELECT name FROM employees WHERE name LIKE ‘%z’;`
   2. `SELECT name FROM employees WHERE name LIKE ‘%z%’;`
   3. `SELECT name FROM employees WHERE name LIKE ‘z’;`
   4. `SELECT name FROM employees WHERE name = ‘z%’;`
7. You need to perform a SQL join. You want to return all the columns with records matching on the `employee_id` column between the `employees` and `machines` tables. You also want to return all records from the `machines` table. Which of the following queries would you use?
   1. `SELECT * FROM employees RIGHT JOIN machines ON employees.employee_id = machines.employee_id;`
   2. `SELECT * FROM employees LEFT JOIN machines ON employees.employee_id = machines.employee_id;`
   3. `SELECT * FROM employees FULL OUTER JOIN machines ON employees.employee_id = machines.employee_id;`
   4. `SELECT * FROM employees INNER JOIN machines ON employees.employee_id = machines.employee_id;`
8. You are working with the `Chinook` database. You want to return the `employeeid` and `email` columns from the `employees` table. Replace `--???` with the missing information to complete the query. (If you want to undo your changes to the query, you can click the Reset button.) `--??? FROM employees;`
   1. 6
   2. 4
   3. 2
   4. 8
9. You are working with the `Chinook` database and are responsible for filtering for invoices with a `total` that is more than `20`. Replace `--???` with the missing information to complete the query. (If you want to undo your changes to the query, you can click the Reset button.) `SELECT customerid, total FROM invoices --???`
   1. 3
   2. 4
   3. 2
   4. 1
10. You are working with the `Chinook` database and are responsible for filtering for the customers that have a value of `'USA'` in the `country` column and have a value of `'Frank'` in the `firstname` column. Replace `--???` with the missing information to complete the query. (If you want to undo your changes to the query, you can click the Reset button.) `SELECT firstname, lastname, country FROM customers --???`
    1. 1
    2. 4
    3. 3
    4. 2

## Answers Set 2

1. 2
2. 4
3. 1 & 2
4. 3
5. 1
6. 2
7. 1
8. `SELECT employeeid, email FROM employees;` 4
9. `SELECT customerid, total FROM invoices WHERE total > 20;` 2
10. `SELECT firstname, lastname, country FROM customers WHERE country = 'USA' AND firstname = 'Frank';` 4

## Questions Set 3

1. Why might a security analyst use SQL?
   1. To efficiently find needed data in security logs
   2. To create new files on their computer
   3. To assign new passwords to users
   4. To store data in a spreadsheet
2. What is a primary key?
   1. A column where every row has a unique entry
   2. The first column in every table
   3. The first row in every table
   4. A column that contains null values
3. Which of these SQL statements queries the employees table? Select all that apply.
   1. `SELECT employee_id, device_id FROM employees WHERE employee_id > 1100;`
   2. `SELECT employees FROM employee_id;`
   3. `SELECT * FROM employees;`
   4. `SELECT employees FROM *;`
4. What does INNER JOIN do?
   1. Combine tables and save them as a new table
   2. Filter databases to return only columns that exist in every table
   3. Compare tables and return only the rows that have a matching value in a specified column
   4. Return every row in joined tables
5. Which SQL keyword indicates the condition for a filter?
   1. `FROM`
   2. `WHERE`
   3. `INNER JOIN`
   4. `SELECT`
6. Which query returns all records that start with the character `'a'` from the `name` column in the `employees` table?
   1. `SELECT name FROM employees WHERE name = ‘a%’;`
   2. `SELECT name FROM employees WHERE name LIKE ‘a’;`
   3. `SELECT name FROM employees WHERE name LIKE ‘a%’;`
   4. `SELECT name FROM employees WHERE name LIKE ‘%a’;`
7. What does the following query return? `SELECT * FROM employees RIGHT JOIN machines ON employees.device_id = machines.device_id;`
   1. All columns and records from the employees and machines tables
   2. All columns of the employees and machines tables, all records from the machines table, and the records from employees that match on device_id
   3. All columns of the employees and machines tables, all records from the employees table, and the records from machines that match on device_id
   4. All columns of the employees and machines tables and the records from employees and machines that match on device_id
8. You are working with the `Chinook` database. You want to return the `employeeid` and `email` columns from the `employees` table. Replace `--???` with the missing information to complete the query. (If you want to undo your changes to the query, you can click the Reset button.) `--??? FROM employees;`
   1. 2
   2. 6
   3. 4
   4. 8
9. You are working with the `Chinook` database and are responsible for filtering for invoices with a `total` that is more than `20`. Replace `--???` with the missing information to complete the query. (If you want to undo your changes to the query, you can click the Reset button.) `SELECT customerid, total FROM invoices --???`
   1. 4
   2. 1
   3. 2
   4. 3
10. You are working with the `Chinook` database and are responsible for filtering for customers that live in the `country` of `'USA'` and the `state` with an abbreviation of `'CA'`. Replace `--???` with the missing information to complete the query. (If you want to undo your changes to the query, you can click the Reset button.) `SELECT firstname,lastname, address, country FROM customers --???`
    1. Kathy, Michelle, Frank
    2. Frank, Tim, Dan
    3. Frank, Tim, Dan, Heather, Kathy
    4. John, Michelle, Julia, Patrick

## Answers Set 3

1. 1
2. 1
3. 1 & 3
4. 3
5. 2
6. 3
7. 2
8. `SELECT employeeid, email FROM employees;` 4
9. `SELECT customerid, total FROM invoices WHERE total > 20;` 1
10. `SELECT firstname,lastname, address, country FROM customers WHERE country = 'USA' AND state = 'CA';` 2
